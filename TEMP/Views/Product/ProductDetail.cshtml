@using SSM.Models;
<script src="//code.jquery.com/jquery-1.12.3.js"> </script>
<script src="https://cdn.datatables.net/1.10.12/js/jquery.dataTables.min.js"> </script>
<script src="https://cdn.datatables.net/1.10.12/js/dataTables.bootstrap.min.js"> </script>
<link href="https://cdn.datatables.net/1.10.12/css/dataTables.bootstrap.min.css" rel="stylesheet" />
<script>
    $(document).ready(function () {
        $("#myData").DataTable();
    })
</script>
@if (ViewData["productDetail"] != null)
{
    softwareProduct product = (softwareProduct)ViewData["productDetail"];
    <div class="container" id="product-section">
        <div class="row">
            <div class="col-md-6">
                <img style="border-style: ridge;" src="@product.screenShots" />
            </div>
            <div class="col-md-6">
                <div class="row">
                    <div class="col-md-12">
                        <h1>@product.name</h1>
                    </div>

                </div>
                <div class="row">
                    <div class="col-md-12">
                        <p>@product.shortDescription</p>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <p>@product.unitPrice $</p>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <p>@product.fullDescription</p>
                    </div>
                </div>
            </div><!-- end row -->
        </div><!-- end container -->
    </div>
    <div>
        <table id="myData" class="table table-striped table-bordered" cellspacing="0">
            <tr>
                <th>
                    Attribute name
                </th>
                <th>
                    Code
                </th>
                <th>
                    Description
                </th>
                <th>
                    Number of options
                </th>
                <th>
                    Action
                </th>
            </tr>
            @foreach (productAttribute pattr in product.productAttributes)
            {
                <tr>
                    <td>
                        @pattr.name
                    </td>
                    <td>
                        @pattr.code
                    </td>
                    <td>
                        @pattr.description
                    </td>
                    <td>
                        @pattr.attributeOptions.ToList().Count()
                    </td>
                    <td>
                        <button>Edit</button>
                    </td>
                </tr>
            }
        </table>
    </div>
    <div>
        <table id="myData" class="table table-striped table-bordered" cellspacing="0">
            <tr>
                <th>
                    Plan name
                </th>
                <th>
                    Created Date
                </th>
                <th>
                    Description
                </th>
                <th>
                    Number of steps
                </th>
                <th>
                    Action
                </th>
            </tr>
            @foreach (PrePurchase_FollowUp_Plan plan in product.PrePurchase_FollowUp_Plan)
            {   String corlor = "#ffffff";
                if (plan.isActive) {
                    corlor = "#98FB98";
                }

                <tr style="background-color:@corlor">


                    <td>
                        @plan.name
                    </td>
                    <td>
                        @plan.createDate
                    </td>
                    <td>
                        @plan.Description
                    </td>
                    <td>
                        @plan.Plan_Step.ToList().Count()
                    </td>
                    <td>
                        <button>Edit</button>
                    </td>
                </tr>
            }
        </table>
        <button type="button" onclick="redirectToNewPlan()" class="btn btn-info btn-lg" >+New Plan</button>
    </div>
    <script>
        function redirectToNewPlan() {
            window.location = "/Product/NewPlan";
        }
    </script>
}